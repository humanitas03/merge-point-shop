@startuml
'https://plantuml.com/sequence-diagram'

autonumber

actor client
participant point_shop_server
participant "naver/google auth server"
note left "naver/google auth server" : 네이버 : https://developers.naver.com/docs/common/openapiguide/apilist.md#네이버-로그인 \n구글 : https://developers.google.com/identity/protocols/oauth2


client -> point_shop_server : 서비스 접근 요청
point_shop_server -> "naver/google auth server" : 서비스 접근, 로그인요청
"naver/google auth server" -> client : 로그인 페이지 제공, 서비스 계정 로그인 정보 요청
client -> "naver/google auth server" : ID / Password 입력(네이버/구글)
"naver/google auth server" -> client : 인증 기관 코드 발급(Authorization code)
client --> point_shop_server : Redirect : 지정한 CallBack Url에 따른 리다이렉션
point_shop_server -> "naver/google auth server" : 액세스 정보 요청(Access Token)
"naver/google auth server" -> point_shop_server : Access token 발급
activate point_shop_server
point_shop_server -> point_shop_server : Token 저장
point_shop_server -> client : 로그인 성공 안내
client -> point_shop_server : 서비스 요청 및 이용
point_shop_server -> point_shop_server : 토큰 유효 검증
point_shop_server -> client : 서비스 제공
deactivate point_shop_server
point_shop_server -> point_shop_server : 토큰 유효 만료로 세션 종료 처리
client -> point_shop_server : 서비스 요청
point_shop_server -> client : 재인증 요청

@enduml